{"ast":null,"code":"var _jsxFileName = \"/Users/sumyat/Documents/GitHub/SupplyChain/client/src/pages/Customer/ReceivedByCustomer.js\";\nimport React, { useEffect } from \"react\";\nimport Navbar from \"../../components/Navbar\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport { useStyles } from \"../../components/Styles\";\nimport ProductModal from \"../../components/Modal\";\nimport clsx from \"clsx\";\nimport Loader from \"../../components/Loader\";\nexport default function ReceivedByCustomer(props) {\n  const classes = useStyles();\n  const supplyChainContract = props.supplyChainContract;\n  const [count, setCount] = React.useState(0);\n  const [allReceived, setAllReceived] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const navItem = [[\"Purchase Product\", \"/Customer/buy\"], [\"Receive Product\", \"/Customer/receive\"], [\"Your Products\", \"/Customer/allReceived\"]];\n  React.useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const cnt = await supplyChainContract.methods.fetchItemCount().call();\n      setCount(cnt);\n    })();\n\n    (async () => {\n      const arr = [];\n\n      for (var i = 1; i < count; i++) {\n        const prodState = await supplyChainContract.methods.fetchItemState(i).call();\n\n        if (prodState === \"8\") {\n          const prodData = [];\n          const a = await supplyChainContract.methods.fetchItemPart1(i, \"product\", 0).call();\n          const b = await supplyChainContract.methods.fetchItemPart2(i, \"product\", 0).call();\n          const c = await supplyChainContract.methods.fetchItemPart3(i, \"product\", 0).call();\n          prodData.push(a);\n          prodData.push(b);\n          prodData.push(c);\n          arr.push(prodData);\n        }\n      }\n\n      setAllReceived(arr);\n      setLoading(false);\n    })();\n  }, [count]);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  const [open, setOpen] = React.useState(false);\n  const [modalData, setModalData] = React.useState([]);\n\n  const handleClose = () => setOpen(false);\n\n  const handleClick = async prod => {\n    await setModalData(prod);\n    setOpen(true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    classname: classes.pageWrap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    titlePage: \"Customer\",\n    navItems: navItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProductModal, {\n    prod: modalData,\n    open: open,\n    handleClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: classes.pageHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, \"Your Products\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: classes.tableCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, \"Total : \", allReceived.length), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.TableRoot,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    className: classes.TableContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    \"aria-label\": \"sticky table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.TableHead,\n    align: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, \"Universal ID\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.TableHead,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, \"Product Code\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.TableHead,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \"Manufacturer\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.TableHead,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, \"Manufacture Date\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.TableHead,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, \"Product Name\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: clsx(classes.TableHead, classes.AddressCell),\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, \"Owner\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, allReceived.length !== 0 ? allReceived.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(prod => {\n    const d = new Date(parseInt(prod[1][0] * 1000));\n    return /*#__PURE__*/React.createElement(TableRow, {\n      hover: true,\n      role: \"checkbox\",\n      tabIndex: -1,\n      key: prod[0][0],\n      onClick: () => handleClick(prod),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.TableCell,\n      component: \"th\",\n      align: \"left\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 37\n      }\n    }, prod[0][0]), /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.TableCell,\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 37\n      }\n    }, prod[1][2]), /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.TableCell,\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 37\n      }\n    }, prod[0][4]), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 37\n      }\n    }, d.toDateString() + \" \" + d.toTimeString()), /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.TableCell,\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 37\n      }\n    }, prod[1][1]), /*#__PURE__*/React.createElement(TableCell, {\n      className: clsx(classes.TableCell, classes.AddressCell),\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 37\n      }\n    }, prod[0][2]));\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, \" \")))), /*#__PURE__*/React.createElement(TablePagination, {\n    rowsPerPageOptions: [10, 25, 100],\n    component: \"div\",\n    count: allReceived.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }))))))));\n}","map":{"version":3,"sources":["/Users/sumyat/Documents/GitHub/SupplyChain/client/src/pages/Customer/ReceivedByCustomer.js"],"names":["React","useEffect","Navbar","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","TablePagination","useStyles","ProductModal","clsx","Loader","ReceivedByCustomer","props","classes","supplyChainContract","count","setCount","useState","allReceived","setAllReceived","loading","setLoading","navItem","cnt","methods","fetchItemCount","call","arr","i","prodState","fetchItemState","prodData","a","fetchItemPart1","b","fetchItemPart2","c","fetchItemPart3","push","page","setPage","rowsPerPage","setRowsPerPage","handleChangePage","event","newPage","handleChangeRowsPerPage","target","value","open","setOpen","modalData","setModalData","handleClose","handleClick","prod","pageWrap","pageHeading","tableCount","length","TableRoot","AddressCell","slice","map","d","Date","parseInt","toDateString","toTimeString"],"mappings":"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","sourcesContent":["import React, {useEffect} from \"react\";\nimport Navbar from \"../../components/Navbar\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport { useStyles } from \"../../components/Styles\";\nimport ProductModal from \"../../components/Modal\";\nimport clsx from \"clsx\";\nimport Loader from \"../../components/Loader\";\n\nexport default function ReceivedByCustomer(props) {\n  const classes = useStyles();\n  const supplyChainContract = props.supplyChainContract;\n  const [count, setCount] = React.useState(0);\n  const [allReceived, setAllReceived] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const navItem = [\n    [\"Purchase Product\", \"/Customer/buy\"],\n    [\"Receive Product\", \"/Customer/receive\"],\n    [\"Your Products\", \"/Customer/allReceived\"],\n  ];\n  React.useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const cnt = await supplyChainContract.methods.fetchItemCount().call();\n      setCount(cnt);\n    })();\n\n    (async () => {\n      const arr = [];\n      for (var i = 1; i < count; i++) {\n        const prodState = await supplyChainContract.methods\n          .fetchItemState(i)\n          .call();\n\n        if (prodState === \"8\") {\n          const prodData = [];\n          const a = await supplyChainContract.methods\n            .fetchItemPart1(i, \"product\", 0)\n            .call();\n          const b = await supplyChainContract.methods\n            .fetchItemPart2(i, \"product\", 0)\n            .call();\n          const c = await supplyChainContract.methods\n            .fetchItemPart3(i, \"product\", 0)\n            .call();\n          prodData.push(a);\n          prodData.push(b);\n          prodData.push(c);\n          arr.push(prodData);\n        }\n      }\n      setAllReceived(arr);\n      setLoading(false);\n    })();\n  }, [count]);\n\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  const [open, setOpen] = React.useState(false);\n  const [modalData, setModalData] = React.useState([]);\n\n  const handleClose = () => setOpen(false);\n\n  const handleClick = async (prod) => {\n    await setModalData(prod);\n    setOpen(true);\n  };\n\n  return (\n    <>\n      <div classname={classes.pageWrap}>\n        <Navbar titlePage={\"Customer\"} navItems={navItem}>\n          {loading ? (\n            <Loader />\n          ) : (\n            <>\n              <ProductModal\n                prod={modalData}\n                open={open}\n                handleClose={handleClose}\n              />\n              <h1 className={classes.pageHeading}>Your Products</h1>\n              <h3 className={classes.tableCount}>\n                Total : {allReceived.length}\n              </h3>\n              <>\n                <div>\n                  <Paper className={classes.TableRoot}>\n                    <TableContainer className={classes.TableContainer}>\n                      <Table stickyHeader aria-label=\"sticky table\">\n                        <TableHead>\n                          <TableRow>\n                            <TableCell\n                              className={classes.TableHead}\n                              align=\"left\"\n                            >\n                              Universal ID\n                            </TableCell>\n                            <TableCell\n                              className={classes.TableHead}\n                              align=\"center\"\n                            >\n                              Product Code\n                            </TableCell>\n                            <TableCell\n                              className={classes.TableHead}\n                              align=\"center\"\n                            >\n                              Manufacturer\n                            </TableCell>\n                            <TableCell\n                              className={classes.TableHead}\n                              align=\"center\"\n                            >\n                              Manufacture Date\n                            </TableCell>\n                            <TableCell\n                              className={classes.TableHead}\n                              align=\"center\"\n                            >\n                              Product Name\n                            </TableCell>\n                            <TableCell\n                              className={clsx(\n                                classes.TableHead,\n                                classes.AddressCell\n                              )}\n                              align=\"center\"\n                            >\n                              Owner\n                            </TableCell>\n                          </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {allReceived.length !== 0 ? (\n                            allReceived\n                              .slice(\n                                page * rowsPerPage,\n                                page * rowsPerPage + rowsPerPage\n                              )\n                              .map((prod) => {\n                                const d = new Date(parseInt(prod[1][0] * 1000));\n                                return (\n                                  <TableRow\n                                    hover\n                                    role=\"checkbox\"\n                                    tabIndex={-1}\n                                    key={prod[0][0]}\n                                    onClick={() => handleClick(prod)}\n                                  >\n                                    <TableCell\n                                      className={classes.TableCell}\n                                      component=\"th\"\n                                      align=\"left\"\n                                      scope=\"row\"\n                                    >\n                                      {prod[0][0]}\n                                    </TableCell>\n                                    <TableCell\n                                      className={classes.TableCell}\n                                      align=\"center\"\n                                    >\n                                      {prod[1][2]}\n                                    </TableCell>\n                                    <TableCell\n                                      className={classes.TableCell}\n                                      align=\"center\"\n                                    >\n                                      {prod[0][4]}\n                                    </TableCell>\n                                    <TableCell align=\"center\">\n                                      {d.toDateString() +\n                                        \" \" +\n                                        d.toTimeString()}\n                                    </TableCell>\n                                    <TableCell\n                                      className={classes.TableCell}\n                                      align=\"center\"\n                                    >\n                                      {prod[1][1]}\n                                    </TableCell>\n                                    <TableCell\n                                      className={clsx(\n                                        classes.TableCell,\n                                        classes.AddressCell\n                                      )}\n                                      align=\"left\"\n                                    >\n                                      {prod[0][2]}\n                                    </TableCell>\n                                  </TableRow>\n                                );\n                              })\n                          ) : (\n                            <> </>\n                          )}\n                        </TableBody>\n                      </Table>\n                    </TableContainer>\n                    <TablePagination\n                      rowsPerPageOptions={[10, 25, 100]}\n                      component=\"div\"\n                      count={allReceived.length}\n                      rowsPerPage={rowsPerPage}\n                      page={page}\n                      onChangePage={handleChangePage}\n                      onChangeRowsPerPage={handleChangeRowsPerPage}\n                    />\n                  </Paper>\n                </div>\n              </>\n            </>\n          )}\n        </Navbar>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}